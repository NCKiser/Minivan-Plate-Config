<html>
  <head>
    <title>MiniVanPlate.xyz</title>
    <link rel="stylesheet" href="stylesheet.css">
  </head>
  <body>
    <label for="Layout">Choose a PCB/Layout:</label>

    <select name="Layout" id="Layout" onchange="dropdown_update()">
      <option value="MiniVan_Universal">MiniVan Universal</option>
      <option value="Minisub">Minisub</option>
      <option value="MiniVan_Universal">Monorail Diesel (MiniVan Universal)</option>
      <option value="Monorail_Steam">Monorail Steam</option>
      <option value="Minisub">Monorail Jet (Minisub)</option>
    </select>

    <br>

    <label for="Case">Choose a Case:</label>

    <select name="Case" id="Case" onchange="dropdown_update()">
      
      <option value="Tray">Tray</option>
      <option value="Tray">PCrack (Tray)</option>
      <option value="Tray">Plastic MiniVan (Tray)</option>
      <option value="Tray">MFR (Tray)</option>
      <option value="Hull">Hull</option>
      <option value="Hull">Dinghy (Hull)</option>
      <option value="Hull">Knuckhull (Hull)</option>
      <option value="Hull">Pomelo (Hull)</option>
      <option value="Hull">Pomelo/Carpool (Hull)</option>
      <option value="Coriander">Coriander</option>
      <option value="Coriander">Barca (Coriander)</option>
      <option value="Coriander">Pomelo (Coriander)</option>
      <option value="Coriander">Carpool (Coriander)</option>
      <option value="Coriander">Hubris (Coriander)</option>
      <option value="Campiander">Campiander (Campsite + Coriander)</option>
    </select>

    <br>
    <br>

    <header>
      <a href="all_dxf/" id="Download"></a>
    </header>
    

    </p>
  </body>
  <script>
    function dropdown_update(){
      var layout_sel = document.getElementById("Layout");
      var case_sel = document.getElementById("Case");
      var selection = layout_sel.value + "_" + case_sel.value + ".dxf"
      var dxf_url = "all_dxf/"+selection
      console.log(selection);
      if (LinkCheck(dxf_url)==true) {
      //if (true) {
        document.getElementById("Download").setAttribute('href', dxf_url);
        document.getElementById("Download").setAttribute('style', "");
        document.getElementById("Download").innerHTML = "<button class=\"download_enabled\">Download "+selection+"</button>";
      } else {
        document.getElementById("Download").setAttribute('href', "/");
        document.getElementById("Download").setAttribute('style', "pointer-events: none;");
        document.getElementById("Download").innerHTML = "<button class=\"download_disabled\">File Not Available</button>";
      }
    }

    function LinkCheck(url)
    {
      var http = new XMLHttpRequest();
      http.open('HEAD', url, false);
      http.send();
      console.log(http.status!=404)
      return http.status!=404;
    }

    dropdown_update()
  </script>
</html>